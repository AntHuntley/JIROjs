(function(e){var t={};t.common={sortFunc:function(e){return function(t,n){return t[e]-n[e]}},toArray:function(e){var n,r=[];for(n in e){n=parseInt(n,10);if(e.hasOwnProperty(n)&&!isNaN(n)){r.push({key:n,value:e[n]})}}return r.sort(t.common.sortFunc("key"))}};t.model={test:0,actionAppend:function(n){this.each(function(){var r=e(this);if(!r.data("jiro")){r.data("jiro",{actions:[],pointer:0,waitingForInit:true});e(window).one("init.jiro",{obj:r},t.view.init)}else if(!r.data("jiro").waitingForInit){r.data("jiro").waitingForInit=true;e(window).one("init.jiro",{obj:r},t.view.set)}r.data("jiro").actions.push(n)})},styleBuffer:[],stylishAppend:function(e){if(t.view.documentReady){t.model.stylishToAction.call(this,e)}else{e.obj=this;t.model.styleBuffer.push(e)}},stylishToAction:function(e){var n=e.property.getter();t.model.actionAppend.call(this,{breakPoint:e.breakPoint,overFunction:function(){return e.property.setter(e.over==="current"?n:e.over)},underFunction:function(){return e.property.setter(e.under==="current"?n:e.under)}})},unbuffer:function(){function n(t,n){var r;while(t.length>0){r=t.pop();e(r.obj).css("background-color","red");n.call(r.obj,r)}}n(t.model.styleBuffer,t.model.stylishToAction)}};t.view={documentReady:false,set:function(e){var n,r,i=e.data.obj,s=i.data("jiro");s.actions.sort(t.common.sortFunc("breakPoint"));s.waitingForInit=false;for(n=0;n<s.actions.length&&s.actions[n].breakPoint<i.width();n++){s.actions[n].overFunction(e)}s.pointer=n;for(r=s.actions.length;r>0&&r>n;r--){s.actions[r-1].underFunction(e)}},init:function(n){t.view.set(n);e(window).on("resize.jiro",{object:n.data.obj},t.view.iterate)},iterate:function(e){var t,n=e.data.object,r=n.data("jiro");for(t=r.pointer;t<r.actions.length&&r.actions[t].breakPoint<n.width();t++){r.actions[t].overFunction(e)}for(null;t>0&&r.actions[t-1].breakPoint>=n.width();t--){r.actions[t-1].underFunction(e)}r.pointer=t},load:e(document).ready(function(){t.view.documentReady=true;t.model.unbuffer();e(window).trigger("init.jiro")})};t.user={addSwitch:function(e,n){if("toggle"in n)t.model.actionAppend.call(this,{breakPoint:e,overFunction:n.toggle,underFunction:n.toggle});else t.model.actionAppend.call(this,{breakPoint:e,overFunction:n.over,underFunction:n.under})},addCont:function(n,r){function s(t,n){e(document)[t]("ready",{obj:i},n);e(window)[t]("resize",{obj:i},n)}var i=this;if(arguments.length>1){if("over"in r){t.model.actionAppend.call(i,r.over,s("off",n),s("on",n))}if("under"in r){t.model.actionAppend.call(i,r.under,s("on",n),s("off",n))}}else s("on",n)},addStep:function(n,r){function o(e,r,i){if(r==="current"||i==="current"){t.model.stylishAppend.call(this,{breakPoint:e,property:{getter:function(){return n.getter()},setter:function(e){return n.setter(e)}},over:r,under:i})}else{t.model.actionAppend.call(this,{breakPoint:e,overFunction:function(){return n.setter(r)},underFunction:function(){return n.setter(i)}})}}function u(e,t,n){var r,i;for(r=0;r+n<e.length;r++){i=e[r+n].value;o.call(this,e[r].key,i,t);t=i}}var i={},s;if(!("getter"in n)&&"css"in n){n.getter=function(){return e(n.elem).css(n.css)}}else{n.getter=function(){return e(n.elem)[n.prop]()}}if(!("setter"in n)&&"css"in n){n.setter=function(t){return e(n.elem).css(n.css,t)}}else{n.setter=function(t){return e(n.elem)[n.prop](t)}}if("over"in r){i.over=t.common.toArray(r.over);s="limit"in r.over?r.over.limit:"current";u.call(this,i.over,s,0)}if("under"in r){i.under=t.common.toArray(r.under);u.call(this,i.under,i.under[0].value,1);s="limit"in r.under?r.under.limit:"current";o.call(this,i.under[i.under.length-1].key,s,i.under[i.under.length-1].value)}}};e.fn.jiro=function(n){if(t.user[n]){t.user[n].apply(this,Array.prototype.slice.call(arguments,1));if(t.view.documentReady)e(window).trigger("init.jiro")}else{console.log('Method "'+n+'" does not exist in jQuery.jiro')}return this}})(jQuery)